language: node_js
node_js:
  - node
cache:
  directories:
    - node_modules

stages:
  # lint and unit test on every PR to merge into develop
  - name: lint
    if: type = pull_request AND branch = develop
  - name: test (unit)
    if: type = pull_request AND branch = develop
  # make a release candidate or a release
  - name: release
    if: tag IS present AND branch = master

jobs:
  include:
    - stage: lint
      script: echo performing code analysis
    - stage: test (unit)
      script: echo testing...
    - stage: release
      script: echo releasing...

# notifications:
#   slack: '<account>:<token>#team-backend'
#     on_success: change
#     on_failure: change
#     on_pull_requests: false
